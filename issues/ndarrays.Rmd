---
title: "Array Conversion"
output: html_document
---

```{r setup, include = FALSE}
library(reticulate)
np <- import("numpy", convert = FALSE)
knitr::opts_chunk$set(comment = NA)
```


### R 2x3x2 array (rows = 2, cols = 3)

```{r}
a <- array(c(1:12), dim = c(2,3,2))
a
```

### Flattened (in-memory) representation

```{r}
as.numeric(a)
```


### Python 2x3x2 array

```{r}
np_a <- np$arange(1,13)$reshape(2L, 2L, 3L)
np_a
```

### Flattended (in-memory) representation

```{r}
np_a$flatten(order = 'K')
```

### C-style representation

```{r}
np_a$flatten(order = 'C')
```


Fortran style representation.

Note that the 3rd dimension isn't contiguous like in R, rather it appears to be spread out -- i.e. all of the (1,1) elements from the 3rd dimension followed by all of the (1,2) elements from the 3rd dimension, etc.

```{r}
np_a$flatten(order = 'F')
```


### Convert R to NumPy then display in-memory representation

```{r}
np_a_from_r <- r_to_py(a)
np_a_from_r$flatten(order = 'K')
```


### Fortran representation (what we ask for in PyArray_CastToType)

```{r}
np_a_from_r$flatten(order = 'F')
```




